import{s as Ve,n as me,c as de,r as Oe,a as ze}from"../chunks/scheduler.CMRjZhAU.js";import{S as Ge,i as Ye,e as u,t as A,s as E,l as Be,c as _,a as C,b as w,d as c,f as D,g as N,h as o,j as W,k as $,m as B,p as Ue,o as Te}from"../chunks/index.C4E97lkk.js";import{e as ge}from"../chunks/each.D6YF6ztN.js";import{p as qe}from"../chunks/stores.BakboWGh.js";import{m as He,j as Je,i as Ke,u as Qe,a as pe}from"../chunks/store.BeOcsEKM.js";function We(n,e,a){const s=n.slice();return s[20]=e[a],s}function Pe(n,e,a){const s=n.slice();return s[20]=e[a],s}function Me(n){let e,a="My Created Challenges",s,i,b,m='<tr><th scope="col">Challenge ID</th> <th scope="col">Description</th> <th scope="col">Type</th> <th scope="col">Wager</th> <th scope="col">State</th> <th scope="col">Fitnessuser Id1</th> <th scope="col">Fitnessuser Id2</th> <th scope="col">Actions</th> <th scope="col">Actions to Finish</th> <th scope="col">View Single</th></tr>',T,h,d=ge(n[3]),t=[];for(let l=0;l<d.length;l+=1)t[l]=je(Pe(n,d,l));return{c(){e=u("h1"),e.textContent=a,s=E(),i=u("table"),b=u("thead"),b.innerHTML=m,T=E(),h=u("tbody");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=_(l,"H1",{"data-svelte-h":!0}),$(e)!=="svelte-12o0bl6"&&(e.textContent=a),s=D(l),i=_(l,"TABLE",{class:!0});var p=C(i);b=_(p,"THEAD",{"data-svelte-h":!0}),$(b)!=="svelte-aogs9a"&&(b.innerHTML=m),T=D(p),h=_(p,"TBODY",{});var r=C(h);for(let k=0;k<t.length;k+=1)t[k].l(r);r.forEach(c),p.forEach(c),this.h()},h(){B(i,"class","table")},m(l,p){N(l,e,p),N(l,s,p),N(l,i,p),o(i,b),o(i,T),o(i,h);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(h,null)},p(l,p){if(p&462){d=ge(l[3]);let r;for(r=0;r<d.length;r+=1){const k=Pe(l,d,r);t[r]?t[r].p(k,p):(t[r]=je(k),t[r].c(),t[r].m(h,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=d.length}},d(l){l&&(c(e),c(s),c(i)),Ue(t,l)}}}function Xe(n){let e,a="Finished";return{c(){e=u("span"),e.textContent=a,this.h()},l(s){e=_(s,"SPAN",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1pyhy73"&&(e.textContent=a),this.h()},h(){B(e,"class","badge bg-success")},m(s,i){N(s,e,i)},d(s){s&&c(e)}}}function Ze(n){let e,a="Running";return{c(){e=u("span"),e.textContent=a,this.h()},l(s){e=_(s,"SPAN",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-bkp6rd"&&(e.textContent=a),this.h()},h(){B(e,"class","badge bg-secondary")},m(s,i){N(s,e,i)},d(s){s&&c(e)}}}function $e(n){let e,a="Finish Challenge",s,i;function b(){return n[13](n[20])}return{c(){e=u("button"),e.textContent=a,this.h()},l(m){e=_(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),$(e)!=="svelte-h146dd"&&(e.textContent=a),this.h()},h(){B(e,"type","button"),B(e,"class","btn btn-primary btn-sm")},m(m,T){N(m,e,T),s||(i=Te(e,"click",b),s=!0)},p(m,T){n=m},d(m){m&&c(e),s=!1,i()}}}function xe(n){let e,a="Select a winner";return{c(){e=u("span"),e.textContent=a,this.h()},l(s){e=_(s,"SPAN",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-fr2vui"&&(e.textContent=a),this.h()},h(){B(e,"class","badge bg-info")},m(s,i){N(s,e,i)},p:me,d(s){s&&c(e)}}}function je(n){let e,a,s=n[20].id+"",i,b,m,T=n[20].description+"",h,d,t,l=n[20].challengeType+"",p,r,k,P=n[20].wager+"",V,x,M,j=n[20].challengeState+"",G,ee,L,f,S,H=n[20].fitnessuserId1+"",R,te,J,U,K,le=n[20].fitnessuserId2+"",Q,Y,X,se,Z,ae,O,I,y,g,ie,re,ce;function ue(){return n[11](n[20])}function _e(){return n[12](n[20])}function he(z,v){if(z[20].challengeState==="RUNNING")return Ze;if(z[20].challengeState==="FINISHED")return Xe}let ne=he(n),F=ne&&ne(n);function fe(z,v){return z[2]===null?xe:$e}let oe=fe(n),q=oe(n);return{c(){e=u("tr"),a=u("td"),i=A(s),b=E(),m=u("td"),h=A(T),d=E(),t=u("td"),p=A(l),r=E(),k=u("td"),V=A(P),x=E(),M=u("td"),G=A(j),ee=E(),L=u("td"),f=u("button"),S=A("Select Winner: "),R=A(H),te=E(),J=u("td"),U=u("button"),K=A("Select Winner: "),Q=A(le),Y=E(),X=u("td"),F&&F.c(),se=E(),Z=u("td"),q.c(),ae=E(),O=u("td"),I=u("a"),y=A("View"),ie=E(),this.h()},l(z){e=_(z,"TR",{});var v=C(e);a=_(v,"TD",{});var Ce=C(a);i=w(Ce,s),Ce.forEach(c),b=D(v),m=_(v,"TD",{});var ke=C(m);h=w(ke,T),ke.forEach(c),d=D(v),t=_(v,"TD",{});var Ee=C(t);p=w(Ee,l),Ee.forEach(c),r=D(v),k=_(v,"TD",{});var De=C(k);V=w(De,P),De.forEach(c),x=D(v),M=_(v,"TD",{});var ye=C(M);G=w(ye,j),ye.forEach(c),ee=D(v),L=_(v,"TD",{});var Ie=C(L);f=_(Ie,"BUTTON",{type:!0,class:!0});var be=C(f);S=w(be,"Select Winner: "),R=w(be,H),be.forEach(c),Ie.forEach(c),te=D(v),J=_(v,"TD",{});var Se=C(J);U=_(Se,"BUTTON",{type:!0,class:!0});var ve=C(U);K=w(ve,"Select Winner: "),Q=w(ve,le),ve.forEach(c),Se.forEach(c),Y=D(v),X=_(v,"TD",{});var Ae=C(X);F&&F.l(Ae),Ae.forEach(c),se=D(v),Z=_(v,"TD",{});var we=C(Z);q.l(we),we.forEach(c),ae=D(v),O=_(v,"TD",{});var Ne=C(O);I=_(Ne,"A",{href:!0});var Fe=C(I);y=w(Fe,"View"),Fe.forEach(c),Ne.forEach(c),ie=D(v),v.forEach(c),this.h()},h(){B(f,"type","button"),B(f,"class","btn btn-primary btn-sm"),B(U,"type","button"),B(U,"class","btn btn-primary btn-sm"),B(I,"href",g="/challenge?id="+n[20].id)},m(z,v){N(z,e,v),o(e,a),o(a,i),o(e,b),o(e,m),o(m,h),o(e,d),o(e,t),o(t,p),o(e,r),o(e,k),o(k,V),o(e,x),o(e,M),o(M,G),o(e,ee),o(e,L),o(L,f),o(f,S),o(f,R),o(e,te),o(e,J),o(J,U),o(U,K),o(U,Q),o(e,Y),o(e,X),F&&F.m(X,null),o(e,se),o(e,Z),q.m(Z,null),o(e,ae),o(e,O),o(O,I),o(I,y),o(e,ie),re||(ce=[Te(f,"click",ue),Te(U,"click",_e)],re=!0)},p(z,v){n=z,v&8&&s!==(s=n[20].id+"")&&W(i,s),v&8&&T!==(T=n[20].description+"")&&W(h,T),v&8&&l!==(l=n[20].challengeType+"")&&W(p,l),v&8&&P!==(P=n[20].wager+"")&&W(V,P),v&8&&j!==(j=n[20].challengeState+"")&&W(G,j),v&8&&H!==(H=n[20].fitnessuserId1+"")&&W(R,H),v&8&&le!==(le=n[20].fitnessuserId2+"")&&W(Q,le),ne!==(ne=he(n))&&(F&&F.d(1),F=ne&&ne(n),F&&(F.c(),F.m(X,null))),oe===(oe=fe(n))&&q?q.p(n,v):(q.d(1),q=oe(n),q&&(q.c(),q.m(Z,null))),v&8&&g!==(g="/challenge?id="+n[20].id)&&B(I,"href",g)},d(z){z&&c(e),F&&F.d(),q.d(),re=!1,Oe(ce)}}}function Le(n){let e,a="My Competed Challenges",s,i,b,m='<tr><th scope="col">Challenge ID</th> <th scope="col">Description</th> <th scope="col">Type</th> <th scope="col">Wager</th> <th scope="col">State</th> <th scope="col">Fitnessuser Id1</th> <th scope="col">Fitnessuser Id2</th> <th scope="col">Actions</th> <th scope="col">View Single</th></tr>',T,h,d=ge(n[3]),t=[];for(let l=0;l<d.length;l+=1)t[l]=Re(We(n,d,l));return{c(){e=u("h1"),e.textContent=a,s=E(),i=u("table"),b=u("thead"),b.innerHTML=m,T=E(),h=u("tbody");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=_(l,"H1",{"data-svelte-h":!0}),$(e)!=="svelte-1ig9409"&&(e.textContent=a),s=D(l),i=_(l,"TABLE",{class:!0});var p=C(i);b=_(p,"THEAD",{"data-svelte-h":!0}),$(b)!=="svelte-1jybdjp"&&(b.innerHTML=m),T=D(p),h=_(p,"TBODY",{});var r=C(h);for(let k=0;k<t.length;k+=1)t[k].l(r);r.forEach(c),p.forEach(c),this.h()},h(){B(i,"class","table")},m(l,p){N(l,e,p),N(l,s,p),N(l,i,p),o(i,b),o(i,T),o(i,h);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(h,null)},p(l,p){if(p&8){d=ge(l[3]);let r;for(r=0;r<d.length;r+=1){const k=We(l,d,r);t[r]?t[r].p(k,p):(t[r]=Re(k),t[r].c(),t[r].m(h,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=d.length}},d(l){l&&(c(e),c(s),c(i)),Ue(t,l)}}}function et(n){let e,a="Finished";return{c(){e=u("span"),e.textContent=a,this.h()},l(s){e=_(s,"SPAN",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1pyhy73"&&(e.textContent=a),this.h()},h(){B(e,"class","badge bg-success")},m(s,i){N(s,e,i)},d(s){s&&c(e)}}}function tt(n){let e,a="Running";return{c(){e=u("span"),e.textContent=a,this.h()},l(s){e=_(s,"SPAN",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-bkp6rd"&&(e.textContent=a),this.h()},h(){B(e,"class","badge bg-secondary")},m(s,i){N(s,e,i)},d(s){s&&c(e)}}}function Re(n){let e,a,s=n[20].id+"",i,b,m,T=n[20].description+"",h,d,t,l=n[20].challengeType+"",p,r,k,P=n[20].wager+"",V,x,M,j=n[20].challengeState+"",G,ee,L,f=n[20].fitnessuserId1+"",S,H,R,te=n[20].fitnessuserId2+"",J,U,K,le,Q,Y,X,se,Z;function ae(y,g){if(y[20].challengeState==="RUNNING")return tt;if(y[20].challengeState==="FINISHED")return et}let O=ae(n),I=O&&O(n);return{c(){e=u("tr"),a=u("td"),i=A(s),b=E(),m=u("td"),h=A(T),d=E(),t=u("td"),p=A(l),r=E(),k=u("td"),V=A(P),x=E(),M=u("td"),G=A(j),ee=E(),L=u("td"),S=A(f),H=E(),R=u("td"),J=A(te),U=E(),K=u("td"),I&&I.c(),le=E(),Q=u("td"),Y=u("a"),X=A("View"),Z=E(),this.h()},l(y){e=_(y,"TR",{});var g=C(e);a=_(g,"TD",{});var ie=C(a);i=w(ie,s),ie.forEach(c),b=D(g),m=_(g,"TD",{});var re=C(m);h=w(re,T),re.forEach(c),d=D(g),t=_(g,"TD",{});var ce=C(t);p=w(ce,l),ce.forEach(c),r=D(g),k=_(g,"TD",{});var ue=C(k);V=w(ue,P),ue.forEach(c),x=D(g),M=_(g,"TD",{});var _e=C(M);G=w(_e,j),_e.forEach(c),ee=D(g),L=_(g,"TD",{});var he=C(L);S=w(he,f),he.forEach(c),H=D(g),R=_(g,"TD",{});var ne=C(R);J=w(ne,te),ne.forEach(c),U=D(g),K=_(g,"TD",{});var F=C(K);I&&I.l(F),F.forEach(c),le=D(g),Q=_(g,"TD",{});var fe=C(Q);Y=_(fe,"A",{href:!0});var oe=C(Y);X=w(oe,"View"),oe.forEach(c),fe.forEach(c),Z=D(g),g.forEach(c),this.h()},h(){B(Y,"href",se="/challenge?id="+n[20].id)},m(y,g){N(y,e,g),o(e,a),o(a,i),o(e,b),o(e,m),o(m,h),o(e,d),o(e,t),o(t,p),o(e,r),o(e,k),o(k,V),o(e,x),o(e,M),o(M,G),o(e,ee),o(e,L),o(L,S),o(e,H),o(e,R),o(R,J),o(e,U),o(e,K),I&&I.m(K,null),o(e,le),o(e,Q),o(Q,Y),o(Y,X),o(e,Z)},p(y,g){g&8&&s!==(s=y[20].id+"")&&W(i,s),g&8&&T!==(T=y[20].description+"")&&W(h,T),g&8&&l!==(l=y[20].challengeType+"")&&W(p,l),g&8&&P!==(P=y[20].wager+"")&&W(V,P),g&8&&j!==(j=y[20].challengeState+"")&&W(G,j),g&8&&f!==(f=y[20].fitnessuserId1+"")&&W(S,f),g&8&&te!==(te=y[20].fitnessuserId2+"")&&W(J,te),O!==(O=ae(y))&&(I&&I.d(1),I=O&&O(y),I&&(I.c(),I.m(K,null))),g&8&&se!==(se="/challenge?id="+y[20].id)&&B(Y,"href",se)},d(y){y&&c(e),I&&I.d()}}}function lt(n){let e,a,s,i=n[4]&&n[5].user_roles&&n[5].user_roles.includes("fitnesscoach"),b,m=n[4]&&n[5].user_roles&&n[5].user_roles.includes("fitnessuser"),T,h=i&&Me(n),d=m&&Le(n);return{c(){e=u("p"),a=A(n[0]),s=E(),h&&h.c(),b=E(),d&&d.c(),T=Be()},l(t){e=_(t,"P",{});var l=C(e);a=w(l,n[0]),l.forEach(c),s=D(t),h&&h.l(t),b=D(t),d&&d.l(t),T=Be()},m(t,l){N(t,e,l),o(e,a),N(t,s,l),h&&h.m(t,l),N(t,b,l),d&&d.m(t,l),N(t,T,l)},p(t,[l]){l&1&&W(a,t[0]),l&48&&(i=t[4]&&t[5].user_roles&&t[5].user_roles.includes("fitnesscoach")),i?h?h.p(t,l):(h=Me(t),h.c(),h.m(b.parentNode,b)):h&&(h.d(1),h=null),l&48&&(m=t[4]&&t[5].user_roles&&t[5].user_roles.includes("fitnessuser")),m?d?d.p(t,l):(d=Le(t),d.c(),d.m(T.parentNode,T)):d&&(d.d(1),d=null)},i:me,o:me,d(t){t&&(c(e),c(s),c(b),c(T)),h&&h.d(t),d&&d.d(t)}}}function nt(n,e,a){let s,i,b,m,T;de(n,He,f=>a(0,s=f)),de(n,Je,f=>a(9,i=f)),de(n,qe,f=>a(10,b=f)),de(n,Ke,f=>a(4,m=f)),de(n,Qe,f=>a(5,T=f));const h=b.url.origin;let d,t="",l=null,p=[],r=[];function k(){var f={method:"get",url:h+"/api/challenge/fitness/"+d,headers:{Authorization:"Bearer "+i}};pe(f).then(function(S){a(3,r=S.data)}).catch(function(S){alert("Could not get challenges"),console.log(S)})}function P(f,S){var H={method:"put",url:h+"/api/service/finishchallenge?challengeId="+f+"&winnerEmail="+S,headers:{Authorization:"Bearer "+i}};pe(H).then(function(R){k()}).catch(function(R){alert("Could not finish challenge"),console.log(R)})}function V(f){var S={method:"get",url:h+"/api/fitnessuser/"+f,headers:{Authorization:"Bearer "+i}};pe(S).then(function(H){p=H.data,a(1,t=H.data.email),console.log(p),console.log(t)}).catch(function(H){alert("Could not get fitnessuser id"),console.log(H)})}function x(){var f={method:"get",url:h+"/api/service/me/myinfo",headers:{Authorization:"Bearer "+i}};pe(f).then(function(S){ze(He,s=S.data.id,s)}).catch(function(S){alert("Could not get fitnessuser id"),console.log(S)})}function M(f){a(2,l=f),console.log(l),V(l)}function j(f){a(2,l=f),console.log(l),V(l)}const G=f=>{M(f.fitnessuserId1)},ee=f=>{j(f.fitnessuserId2)},L=f=>{P(f.id,t)};return n.$$.update=()=>{n.$$.dirty&1537&&(d=b.url.searchParams.get("id"),i!==""&&(x(),console.log(s)),k())},[s,t,l,r,m,T,P,M,j,i,b,G,ee,L]}class ct extends Ge{constructor(e){super(),Ye(this,e,nt,lt,Ve,{})}}export{ct as component};
