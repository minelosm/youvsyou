import{s as lt,n as G,c as O,r as ot,a as st}from"../chunks/scheduler.CMRjZhAU.js";import{S as rt,i as it,l as R,g as k,d as h,e as b,s as E,t as N,c as v,k as I,f as D,a as x,b as q,m as A,h as _,n as X,o as Z,j as V,p as ct}from"../chunks/index.C4E97lkk.js";import{e as $}from"../chunks/each.D6YF6ztN.js";import{j as ut,m as tt,i as ft,a as Y}from"../chunks/store.BeOcsEKM.js";import{p as dt}from"../chunks/stores.BakboWGh.js";function et(u,t,n){const e=u.slice();return e[11]=t[n],e}function nt(u){let t,n="Balance Account",e,o,C,y=u[1].balance+"",m,p,c,s,r="",d,i,a,l,j="Amount",L,T,S,H,J="Add Balance",z,w,U,K;function Q(f,g){return f[1].transactions.length>0?_t:ht}let F=Q(u),B=F(u);return{c(){t=b("h1"),t.textContent=n,e=E(),o=b("p"),C=N("Balance: "),m=N(y),p=E(),c=b("form"),s=b("div"),s.innerHTML=r,d=E(),i=b("div"),a=b("div"),l=b("label"),l.textContent=j,L=E(),T=b("input"),S=E(),H=b("button"),H.textContent=J,z=E(),B.c(),w=R(),this.h()},l(f){t=v(f,"H1",{"data-svelte-h":!0}),I(t)!=="svelte-gby4s3"&&(t.textContent=n),e=D(f),o=v(f,"P",{});var g=x(o);C=q(g,"Balance: "),m=q(g,y),g.forEach(h),p=D(f),c=v(f,"FORM",{class:!0});var M=x(c);s=v(M,"DIV",{class:!0,"data-svelte-h":!0}),I(s)!=="svelte-1342opc"&&(s.innerHTML=r),d=D(M),i=v(M,"DIV",{class:!0});var W=x(i);a=v(W,"DIV",{class:!0});var P=x(a);l=v(P,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),I(l)!=="svelte-1q1ozwi"&&(l.textContent=j),L=D(P),T=v(P,"INPUT",{type:!0,id:!0,class:!0}),P.forEach(h),W.forEach(h),S=D(M),H=v(M,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),I(H)!=="svelte-1h7ux1r"&&(H.textContent=J),M.forEach(h),z=D(f),B.l(f),w=R(),this.h()},h(){A(s,"class","row mb-3"),A(l,"class","form-label"),A(l,"for","amount"),A(T,"type","integer"),A(T,"id","amount"),A(T,"class","form-control"),A(a,"class","col"),A(i,"class","row mb-3"),A(H,"type","button"),A(H,"class","btn btn-warning"),A(c,"class","mb-5")},m(f,g){k(f,t,g),k(f,e,g),k(f,o,g),_(o,C),_(o,m),k(f,p,g),k(f,c,g),_(c,s),_(c,d),_(c,i),_(i,a),_(a,l),_(a,L),_(a,T),X(T,u[0]),_(c,S),_(c,H),k(f,z,g),B.m(f,g),k(f,w,g),U||(K=[Z(T,"input",u[5]),Z(H,"click",u[3])],U=!0)},p(f,g){g&2&&y!==(y=f[1].balance+"")&&V(m,y),g&1&&X(T,f[0]),F===(F=Q(f))&&B?B.p(f,g):(B.d(1),B=F(f),B&&(B.c(),B.m(w.parentNode,w)))},d(f){f&&(h(t),h(e),h(o),h(p),h(c),h(z),h(w)),B.d(f),U=!1,ot(K)}}}function ht(u){let t,n="No transactions found.";return{c(){t=b("p"),t.textContent=n},l(e){t=v(e,"P",{"data-svelte-h":!0}),I(t)!=="svelte-r37g2m"&&(t.textContent=n)},m(e,o){k(e,t,o)},p:G,d(e){e&&h(t)}}}function _t(u){let t,n="Transaction History",e,o,C,y="<tr><th>Date</th> <th>Amount</th> <th>Description</th></tr>",m,p,c=$(u[1].transactions),s=[];for(let r=0;r<c.length;r+=1)s[r]=at(et(u,c,r));return{c(){t=b("h2"),t.textContent=n,e=E(),o=b("table"),C=b("thead"),C.innerHTML=y,m=E(),p=b("tbody");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){t=v(r,"H2",{"data-svelte-h":!0}),I(t)!=="svelte-xfqjnq"&&(t.textContent=n),e=D(r),o=v(r,"TABLE",{class:!0});var d=x(o);C=v(d,"THEAD",{"data-svelte-h":!0}),I(C)!=="svelte-xdrpu6"&&(C.innerHTML=y),m=D(d),p=v(d,"TBODY",{});var i=x(p);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(h),d.forEach(h),this.h()},h(){A(o,"class","table")},m(r,d){k(r,t,d),k(r,e,d),k(r,o,d),_(o,C),_(o,m),_(o,p);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(p,null)},p(r,d){if(d&2){c=$(r[1].transactions);let i;for(i=0;i<c.length;i+=1){const a=et(r,c,i);s[i]?s[i].p(a,d):(s[i]=at(a),s[i].c(),s[i].m(p,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=c.length}},d(r){r&&(h(t),h(e),h(o)),ct(s,r)}}}function at(u){let t,n,e=u[11].transactionDate+"",o,C,y,m=u[11].amount+"",p,c,s,r=u[11].description+"",d,i;return{c(){t=b("tr"),n=b("td"),o=N(e),C=E(),y=b("td"),p=N(m),c=E(),s=b("td"),d=N(r),i=E()},l(a){t=v(a,"TR",{});var l=x(t);n=v(l,"TD",{});var j=x(n);o=q(j,e),j.forEach(h),C=D(l),y=v(l,"TD",{});var L=x(y);p=q(L,m),L.forEach(h),c=D(l),s=v(l,"TD",{});var T=x(s);d=q(T,r),T.forEach(h),i=D(l),l.forEach(h)},m(a,l){k(a,t,l),_(t,n),_(n,o),_(t,C),_(t,y),_(y,p),_(t,c),_(t,s),_(s,d),_(t,i)},p(a,l){l&2&&e!==(e=a[11].transactionDate+"")&&V(o,e),l&2&&m!==(m=a[11].amount+"")&&V(p,m),l&2&&r!==(r=a[11].description+"")&&V(d,r)},d(a){a&&h(t)}}}function pt(u){let t,n=u[2]&&nt(u);return{c(){n&&n.c(),t=R()},l(e){n&&n.l(e),t=R()},m(e,o){n&&n.m(e,o),k(e,t,o)},p(e,[o]){e[2]?n?n.p(e,o):(n=nt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:G,o:G,d(e){e&&h(t),n&&n.d(e)}}}function mt(u,t,n){let e,o,C,y;O(u,ut,a=>n(4,e=a)),O(u,tt,a=>n(6,o=a)),O(u,dt,a=>n(7,C=a)),O(u,ft,a=>n(2,y=a));const m=C.url.origin;let p=0,c={balance:0,transactions:[]};function s(){var a={method:"get",url:m+"/api/service/me/myinfo",headers:{Authorization:"Bearer "+e}};Y(a).then(function(l){st(tt,o=l.data.id,o)}).catch(function(l){alert("Could not get fitnessuser id"),console.log(l)})}function r(){var a={method:"put",url:m+"/api/balance/account/add?amount="+p,headers:{Authorization:"Bearer "+e}};Y(a).then(function(l){n(1,c.balance=l.data.balance,c),alert("Balance "+p+" added successfully"),d()}).catch(function(l){alert("Could not add balance"),console.log(l)})}function d(){var a={method:"get",url:m+"/api/balance/account/myinfo",headers:{Authorization:"Bearer "+e}};Y(a).then(function(l){n(1,c.balance=l.data.balance,c),n(1,c.transactions=l.data.transactions||[],c)}).catch(function(l){alert("Could not get account"),console.log(l)})}function i(){p=this.value,n(0,p)}return u.$$.update=()=>{u.$$.dirty&16&&e!==""&&(d(),s())},[p,c,y,r,e,i]}class kt extends rt{constructor(t){super(),it(this,t,mt,pt,lt,{})}}export{kt as component};
