import{s as _t,n as W,c as Q,r as ht,a as pt}from"../chunks/scheduler.D14OqvYY.js";import{S as mt,i as vt,m as R,g as H,d as _,e as m,s as E,t as x,c as v,a as A,k as I,f as y,b as w,l as C,h as o,o as it,n as ot,p as bt,j as q,q as gt}from"../chunks/index.BzgZtzQZ.js";import{e as rt}from"../chunks/each.D6YF6ztN.js";import{j as kt,m as ct,i as Ct,a as tt}from"../chunks/store.BY1jNIC8.js";import{p as Tt}from"../chunks/stores.D7hZxBcF.js";import"../chunks/entry.Bfe3KXsj.js";function ut(u,t,e){const a=u.slice();return a[11]=t[e],a}function ft(u){let t,e,a="Account Balance",f,i,r,d,g='<i class="fa-solid fa-coins"></i>',p,b,s,c,k="Add Balance",l,n,T,N="Amount",M,z,P,X,V,et='<i class="fa-solid fa-coins"></i>',Z,j,lt='<div class="control"><button class="button is-warning"><span class="icon"><i class="fa-solid fa-cart-plus"></i></span> <span>Add Balance</span></button></div>',U,F,$,at;function nt(h,D){return h[1].balance===null?Et:Dt}let Y=nt(u),B=Y(u);function st(h,D){return h[1].transactions.length>0?At:yt}let G=st(u),L=G(u);return{c(){t=m("div"),e=m("p"),e.textContent=a,f=E(),i=m("p"),r=x(`Current Balance:\r
        `),d=m("span"),d.innerHTML=g,p=E(),B.c(),b=E(),s=m("form"),c=m("h3"),c.textContent=k,l=E(),n=m("div"),T=m("label"),T.textContent=N,M=E(),z=m("div"),P=m("input"),X=E(),V=m("span"),V.innerHTML=et,Z=E(),j=m("div"),j.innerHTML=lt,U=E(),L.c(),F=R(),this.h()},l(h){t=v(h,"DIV",{class:!0});var D=A(t);e=v(D,"P",{class:!0,"data-svelte-h":!0}),I(e)!=="svelte-grtzps"&&(e.textContent=a),f=y(D),i=v(D,"P",{class:!0});var O=A(i);r=w(O,`Current Balance:\r
        `),d=v(O,"SPAN",{class:!0,"data-svelte-h":!0}),I(d)!=="svelte-1x38xhd"&&(d.innerHTML=g),p=y(O),B.l(O),O.forEach(_),D.forEach(_),b=y(h),s=v(h,"FORM",{class:!0});var S=A(s);c=v(S,"H3",{class:!0,"data-svelte-h":!0}),I(c)!=="svelte-pdjolm"&&(c.textContent=k),l=y(S),n=v(S,"DIV",{class:!0});var J=A(n);T=v(J,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),I(T)!=="svelte-1w27gc9"&&(T.textContent=N),M=y(J),z=v(J,"DIV",{class:!0});var K=A(z);P=v(K,"INPUT",{class:!0,type:!0}),X=y(K),V=v(K,"SPAN",{class:!0,"data-svelte-h":!0}),I(V)!=="svelte-xrzxxv"&&(V.innerHTML=et),K.forEach(_),J.forEach(_),Z=y(S),j=v(S,"DIV",{class:!0,"data-svelte-h":!0}),I(j)!=="svelte-gidr5l"&&(j.innerHTML=lt),S.forEach(_),U=y(h),L.l(h),F=R(),this.h()},h(){C(e,"class","title is-1"),C(d,"class","icon"),C(i,"class","subtitle is-3"),C(t,"class","box has-background-warning"),C(c,"class","title is-3"),C(T,"class","label"),C(T,"for","balance"),C(P,"class","input"),C(P,"type","integer"),C(V,"class","icon is-small is-left"),C(z,"class","control has-icons-left has-icons-right"),C(n,"class","field"),C(j,"class","field is-grouped"),C(s,"class","box")},m(h,D){H(h,t,D),o(t,e),o(t,f),o(t,i),o(i,r),o(i,d),o(i,p),B.m(i,null),H(h,b,D),H(h,s,D),o(s,c),o(s,l),o(s,n),o(n,T),o(n,M),o(n,z),o(z,P),it(P,u[0]),o(z,X),o(z,V),o(s,Z),o(s,j),H(h,U,D),L.m(h,D),H(h,F,D),$||(at=[ot(P,"input",u[5]),ot(s,"submit",bt(u[3]))],$=!0)},p(h,D){Y===(Y=nt(h))&&B?B.p(h,D):(B.d(1),B=Y(h),B&&(B.c(),B.m(i,null))),D&1&&it(P,h[0]),G===(G=st(h))&&L?L.p(h,D):(L.d(1),L=G(h),L&&(L.c(),L.m(F.parentNode,F)))},d(h){h&&(_(t),_(b),_(s),_(U),_(F)),B.d(),L.d(h),$=!1,ht(at)}}}function Dt(u){let t=u[1].balance+"",e;return{c(){e=x(t)},l(a){e=w(a,t)},m(a,f){H(a,e,f)},p(a,f){f&2&&t!==(t=a[1].balance+"")&&q(e,t)},d(a){a&&_(e)}}}function Et(u){let t;return{c(){t=x("0")},l(e){t=w(e,"0")},m(e,a){H(e,t,a)},p:W,d(e){e&&_(t)}}}function yt(u){let t,e="<p>No transactions found.</p>";return{c(){t=m("div"),t.innerHTML=e,this.h()},l(a){t=v(a,"DIV",{class:!0,"data-svelte-h":!0}),I(t)!=="svelte-1osut9d"&&(t.innerHTML=e),this.h()},h(){C(t,"class","box")},m(a,f){H(a,t,f)},p:W,d(a){a&&_(t)}}}function At(u){let t,e,a="Transaction History",f,i,r,d="<tr><th>Date</th> <th>Amount</th> <th>Description</th></tr>",g,p,b=rt(u[1].transactions),s=[];for(let c=0;c<b.length;c+=1)s[c]=dt(ut(u,b,c));return{c(){t=m("div"),e=m("h3"),e.textContent=a,f=E(),i=m("table"),r=m("thead"),r.innerHTML=d,g=E(),p=m("tbody");for(let c=0;c<s.length;c+=1)s[c].c();this.h()},l(c){t=v(c,"DIV",{class:!0});var k=A(t);e=v(k,"H3",{class:!0,"data-svelte-h":!0}),I(e)!=="svelte-16zls4x"&&(e.textContent=a),f=y(k),i=v(k,"TABLE",{class:!0});var l=A(i);r=v(l,"THEAD",{"data-svelte-h":!0}),I(r)!=="svelte-1qhqgem"&&(r.innerHTML=d),g=y(l),p=v(l,"TBODY",{});var n=A(p);for(let T=0;T<s.length;T+=1)s[T].l(n);n.forEach(_),l.forEach(_),k.forEach(_),this.h()},h(){C(e,"class","title is-3"),C(i,"class","table is-fullwidth"),C(t,"class","box")},m(c,k){H(c,t,k),o(t,e),o(t,f),o(t,i),o(i,r),o(i,g),o(i,p);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(p,null)},p(c,k){if(k&2){b=rt(c[1].transactions);let l;for(l=0;l<b.length;l+=1){const n=ut(c,b,l);s[l]?s[l].p(n,k):(s[l]=dt(n),s[l].c(),s[l].m(p,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=b.length}},d(c){c&&_(t),gt(s,c)}}}function Ht(u){let t,e,a=u[11].transactionDate+"",f,i,r,d=u[11].amount+"",g,p,b,s=u[11].description+"",c,k;return{c(){t=m("tr"),e=m("td"),f=x(a),i=E(),r=m("td"),g=x(d),p=E(),b=m("td"),c=x(s),k=E(),this.h()},l(l){t=v(l,"TR",{class:!0});var n=A(t);e=v(n,"TD",{});var T=A(e);f=w(T,a),T.forEach(_),i=y(n),r=v(n,"TD",{});var N=A(r);g=w(N,d),N.forEach(_),p=y(n),b=v(n,"TD",{});var M=A(b);c=w(M,s),M.forEach(_),k=y(n),n.forEach(_),this.h()},h(){C(t,"class","is-success is-light")},m(l,n){H(l,t,n),o(t,e),o(e,f),o(t,i),o(t,r),o(r,g),o(t,p),o(t,b),o(b,c),o(t,k)},p(l,n){n&2&&a!==(a=l[11].transactionDate+"")&&q(f,a),n&2&&d!==(d=l[11].amount+"")&&q(g,d),n&2&&s!==(s=l[11].description+"")&&q(c,s)},d(l){l&&_(t)}}}function Bt(u){let t,e,a=u[11].transactionDate+"",f,i,r,d=u[11].amount+"",g,p,b,s=u[11].description+"",c,k;return{c(){t=m("tr"),e=m("td"),f=x(a),i=E(),r=m("td"),g=x(d),p=E(),b=m("td"),c=x(s),k=E(),this.h()},l(l){t=v(l,"TR",{class:!0});var n=A(t);e=v(n,"TD",{});var T=A(e);f=w(T,a),T.forEach(_),i=y(n),r=v(n,"TD",{});var N=A(r);g=w(N,d),N.forEach(_),p=y(n),b=v(n,"TD",{});var M=A(b);c=w(M,s),M.forEach(_),k=y(n),n.forEach(_),this.h()},h(){C(t,"class","is-danger is-light")},m(l,n){H(l,t,n),o(t,e),o(e,f),o(t,i),o(t,r),o(r,g),o(t,p),o(t,b),o(b,c),o(t,k)},p(l,n){n&2&&a!==(a=l[11].transactionDate+"")&&q(f,a),n&2&&d!==(d=l[11].amount+"")&&q(g,d),n&2&&s!==(s=l[11].description+"")&&q(c,s)},d(l){l&&_(t)}}}function dt(u){let t,e;function a(r,d){return d&2&&(t=null),t==null&&(t=!!r[11].description.includes("wager")),t?Bt:Ht}let f=a(u,-1),i=f(u);return{c(){i.c(),e=R()},l(r){i.l(r),e=R()},m(r,d){i.m(r,d),H(r,e,d)},p(r,d){f===(f=a(r,d))&&i?i.p(r,d):(i.d(1),i=f(r),i&&(i.c(),i.m(e.parentNode,e)))},d(r){r&&_(e),i.d(r)}}}function Lt(u){let t,e=u[2]&&ft(u);return{c(){e&&e.c(),t=R()},l(a){e&&e.l(a),t=R()},m(a,f){e&&e.m(a,f),H(a,t,f)},p(a,[f]){a[2]?e?e.p(a,f):(e=ft(a),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:W,o:W,d(a){a&&_(t),e&&e.d(a)}}}function Mt(u,t,e){let a,f,i,r;Q(u,kt,l=>e(4,a=l)),Q(u,ct,l=>e(6,f=l)),Q(u,Tt,l=>e(7,i=l)),Q(u,Ct,l=>e(2,r=l));const d=i.url.origin;let g=0,p={balance:0,transactions:[]};function b(){var l={method:"get",url:d+"/api/service/me/myinfo",headers:{Authorization:"Bearer "+a}};tt(l).then(function(n){pt(ct,f=n.data.id,f)}).catch(function(n){alert("Could not get fitnessuser id"),console.log(n)})}function s(){var l={method:"put",url:d+"/api/balance/account/add?amount="+g,headers:{Authorization:"Bearer "+a}};tt(l).then(function(n){e(1,p.balance=n.data.balance,p),alert("Balance "+g+" added successfully"),c()}).catch(function(n){alert("Could not add balance"),console.log(n)})}function c(){var l={method:"get",url:d+"/api/balance/account/myinfo",headers:{Authorization:"Bearer "+a}};tt(l).then(function(n){e(1,p.balance=n.data.balance,p),e(1,p.transactions=n.data.transactions||[],p)}).catch(function(n){alert("Could not get account"),console.log(n)})}function k(){g=this.value,e(0,g)}return u.$$.update=()=>{u.$$.dirty&16&&a!==""&&(c(),b())},[g,p,r,s,a,k]}class Vt extends mt{constructor(t){super(),vt(this,t,Mt,Lt,_t,{})}}export{Vt as component};
