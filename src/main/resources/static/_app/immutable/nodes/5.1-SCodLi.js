import{s as ct,n as it,c as x,r as ft,b as dt}from"../chunks/scheduler.ChOpgImw.js";import{S as pt,i as ht,m as st,g as y,d as f,e as h,s as P,t as M,c as m,k as S,f as D,a as T,b as H,l as u,h as d,n as L,o as R,j as ot}from"../chunks/index.DXDfBviM.js";import{j as mt,m as ut,i as _t,a as Y}from"../chunks/store.BrgeTI6t.js";import{p as bt}from"../chunks/stores.CtCpJjjs.js";function rt(i){let t,e="Account Details",n,a,p,B=i[1].balance+"",I,v,r,U,N=i[1].iban+"",w,j,_,k,s,o,Z="IBAN",G,J,z,g,E,$="Amount",K,C,Q,A,tt="Add Balance",W,et;function at(l,c){return l[1].iban==null?yt:vt}let V=at(i),b=V(i);return{c(){t=h("h1"),t.textContent=e,n=P(),a=h("p"),p=M("Balance: "),I=M(B),v=P(),r=h("p"),U=M("IBAN: "),w=M(N),j=P(),_=h("form"),k=h("div"),s=h("div"),o=h("label"),o.textContent=Z,G=P(),b.c(),J=P(),z=h("div"),g=h("div"),E=h("label"),E.textContent=$,K=P(),C=h("input"),Q=P(),A=h("button"),A.textContent=tt,this.h()},l(l){t=m(l,"H1",{"data-svelte-h":!0}),S(t)!=="svelte-324hdt"&&(t.textContent=e),n=D(l),a=m(l,"P",{});var c=T(a);p=H(c,"Balance: "),I=H(c,B),c.forEach(f),v=D(l),r=m(l,"P",{});var X=T(r);U=H(X,"IBAN: "),w=H(X,N),X.forEach(f),j=D(l),_=m(l,"FORM",{class:!0});var F=T(_);k=m(F,"DIV",{class:!0});var nt=T(k);s=m(nt,"DIV",{class:!0});var O=T(s);o=m(O,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),S(o)!=="svelte-1878hp6"&&(o.textContent=Z),G=D(O),b.l(O),O.forEach(f),nt.forEach(f),J=D(F),z=m(F,"DIV",{class:!0});var lt=T(z);g=m(lt,"DIV",{class:!0});var q=T(g);E=m(q,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),S(E)!=="svelte-1q1ozwi"&&(E.textContent=$),K=D(q),C=m(q,"INPUT",{type:!0,id:!0,class:!0}),q.forEach(f),lt.forEach(f),Q=D(F),A=m(F,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),S(A)!=="svelte-1h7ux1r"&&(A.textContent=tt),F.forEach(f),this.h()},h(){u(o,"class","form-label"),u(o,"for","iban"),u(s,"class","col"),u(k,"class","row mb-3"),u(E,"class","form-label"),u(E,"for","amount"),u(C,"type","integer"),u(C,"id","amount"),u(C,"class","form-control"),u(g,"class","col"),u(z,"class","row mb-3"),u(A,"type","button"),u(A,"class","btn btn-warning"),u(_,"class","mb-5")},m(l,c){y(l,t,c),y(l,n,c),y(l,a,c),d(a,p),d(a,I),y(l,v,c),y(l,r,c),d(r,U),d(r,w),y(l,j,c),y(l,_,c),d(_,k),d(k,s),d(s,o),d(s,G),b.m(s,null),d(_,J),d(_,z),d(z,g),d(g,E),d(g,K),d(g,C),L(C,i[0]),d(_,Q),d(_,A),W||(et=[R(C,"input",i[7]),R(A,"click",i[3])],W=!0)},p(l,c){c&2&&B!==(B=l[1].balance+"")&&ot(I,B),c&2&&N!==(N=l[1].iban+"")&&ot(w,N),V===(V=at(l))&&b?b.p(l,c):(b.d(1),b=V(l),b&&(b.c(),b.m(s,null))),c&1&&L(C,l[0])},d(l){l&&(f(t),f(n),f(a),f(v),f(r),f(j),f(_)),b.d(),W=!1,ft(et)}}}function vt(i){let t,e,n;return{c(){t=h("input"),this.h()},l(a){t=m(a,"INPUT",{type:!0,id:!0,class:!0}),this.h()},h(){u(t,"type","text"),u(t,"id","IBAN"),u(t,"class","form-control"),t.readOnly=!0},m(a,p){y(a,t,p),L(t,i[1].iban),e||(n=R(t,"input",i[6]),e=!0)},p(a,p){p&2&&t.value!==a[1].iban&&L(t,a[1].iban)},d(a){a&&f(t),e=!1,n()}}}function yt(i){let t,e,n;return{c(){t=h("input"),this.h()},l(a){t=m(a,"INPUT",{type:!0,id:!0,class:!0}),this.h()},h(){u(t,"type","text"),u(t,"id","iban"),u(t,"class","form-control")},m(a,p){y(a,t,p),L(t,i[1].iban),e||(n=R(t,"input",i[5]),e=!0)},p(a,p){p&2&&t.value!==a[1].iban&&L(t,a[1].iban)},d(a){a&&f(t),e=!1,n()}}}function Ct(i){let t,e=i[2]&&rt(i);return{c(){e&&e.c(),t=st()},l(n){e&&e.l(n),t=st()},m(n,a){e&&e.m(n,a),y(n,t,a)},p(n,[a]){n[2]?e?e.p(n,a):(e=rt(n),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:it,o:it,d(n){n&&f(t),e&&e.d(n)}}}function At(i,t,e){let n,a,p,B;x(i,mt,s=>e(4,n=s)),x(i,ut,s=>e(8,a=s)),x(i,bt,s=>e(9,p=s)),x(i,_t,s=>e(2,B=s));const I=p.url.origin;let v=0,r={iban:null,balance:0};function U(){var s={method:"get",url:I+"/api/service/me/myinfo",headers:{Authorization:"Bearer "+n}};Y(s).then(function(o){dt(ut,a=o.data.id,a)}).catch(function(o){alert("Could not get fitnessuser id"),console.log(o)})}function N(){var s={method:"put",url:I+"/api/balance/account/add?amount="+v,headers:{Authorization:"Bearer "+n}};Y(s).then(function(o){e(1,r.balance=o.data.balance,r),alert("Balance "+v+" added successfully"),w()}).catch(function(o){alert("Could not add balance"),console.log(o)})}function w(){var s={method:"get",url:I+"/api/balance/account/myinfo",headers:{Authorization:"Bearer "+n}};Y(s).then(function(o){o.data.iban!=null&&e(1,r.iban=o.data.iban,r),e(1,r.balance=o.data.balance,r)}).catch(function(o){alert("Could not get account"),console.log(o)})}function j(){r.iban=this.value,e(1,r)}function _(){r.iban=this.value,e(1,r)}function k(){v=this.value,e(0,v)}return i.$$.update=()=>{i.$$.dirty&16&&n!==""&&(w(),U())},[v,r,B,N,n,j,_,k]}class Et extends pt{constructor(t){super(),ht(this,t,At,Ct,ct,{})}}export{Et as component};
