import{s as vt,n as ot,c as Q,r as yt,b as Ct}from"../chunks/scheduler.ChOpgImw.js";import{S as kt,i as At,m as W,g,d as u,e as m,s as T,t as q,c as v,k as x,f as I,a as D,b as z,l as A,h as d,n as U,o as X,j as R,p as Bt}from"../chunks/index.D2iMMSY1.js";import{e as _t}from"../chunks/each.D6YF6ztN.js";import{j as Et,m as ht,i as gt,a as at}from"../chunks/store.BrgeTI6t.js";import{p as Tt}from"../chunks/stores.CtCpJjjs.js";function pt(o,t,e){const l=o.slice();return l[13]=t[e],l}function bt(o){let t,e="Balance Account",l,n,p,E=o[1].balance+"",B,y,s,f,i=o[1].iban+"",b,r,c,C,_,h,V="IBAN",Z,$,F,H,j,it="Amount",tt,P,et,w,st="Add Balance",S,M,nt,rt;function ct(a,k){return a[1].iban==null?Dt:It}let Y=ct(o),N=Y(o);function ut(a,k){return a[1].transactions.length>0?Lt:Nt}let G=ut(o),L=G(o);return{c(){t=m("h1"),t.textContent=e,l=T(),n=m("p"),p=q("Balance: "),B=q(E),y=T(),s=m("p"),f=q("IBAN: "),b=q(i),r=T(),c=m("form"),C=m("div"),_=m("div"),h=m("label"),h.textContent=V,Z=T(),N.c(),$=T(),F=m("div"),H=m("div"),j=m("label"),j.textContent=it,tt=T(),P=m("input"),et=T(),w=m("button"),w.textContent=st,S=T(),L.c(),M=W(),this.h()},l(a){t=v(a,"H1",{"data-svelte-h":!0}),x(t)!=="svelte-gby4s3"&&(t.textContent=e),l=I(a),n=v(a,"P",{});var k=D(n);p=z(k,"Balance: "),B=z(k,E),k.forEach(u),y=I(a),s=v(a,"P",{});var lt=D(s);f=z(lt,"IBAN: "),b=z(lt,i),lt.forEach(u),r=I(a),c=v(a,"FORM",{class:!0});var O=D(c);C=v(O,"DIV",{class:!0});var ft=D(C);_=v(ft,"DIV",{class:!0});var J=D(_);h=v(J,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),x(h)!=="svelte-1878hp6"&&(h.textContent=V),Z=I(J),N.l(J),J.forEach(u),ft.forEach(u),$=I(O),F=v(O,"DIV",{class:!0});var dt=D(F);H=v(dt,"DIV",{class:!0});var K=D(H);j=v(K,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),x(j)!=="svelte-1q1ozwi"&&(j.textContent=it),tt=I(K),P=v(K,"INPUT",{type:!0,id:!0,class:!0}),K.forEach(u),dt.forEach(u),et=I(O),w=v(O,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),x(w)!=="svelte-1h7ux1r"&&(w.textContent=st),O.forEach(u),S=I(a),L.l(a),M=W(),this.h()},h(){A(h,"class","form-label"),A(h,"for","iban"),A(_,"class","col"),A(C,"class","row mb-3"),A(j,"class","form-label"),A(j,"for","amount"),A(P,"type","integer"),A(P,"id","amount"),A(P,"class","form-control"),A(H,"class","col"),A(F,"class","row mb-3"),A(w,"type","button"),A(w,"class","btn btn-warning"),A(c,"class","mb-5")},m(a,k){g(a,t,k),g(a,l,k),g(a,n,k),d(n,p),d(n,B),g(a,y,k),g(a,s,k),d(s,f),d(s,b),g(a,r,k),g(a,c,k),d(c,C),d(C,_),d(_,h),d(_,Z),N.m(_,null),d(c,$),d(c,F),d(F,H),d(H,j),d(H,tt),d(H,P),U(P,o[0]),d(c,et),d(c,w),g(a,S,k),L.m(a,k),g(a,M,k),nt||(rt=[X(P,"input",o[7]),X(w,"click",o[3])],nt=!0)},p(a,k){k&2&&E!==(E=a[1].balance+"")&&R(B,E),k&2&&i!==(i=a[1].iban+"")&&R(b,i),Y===(Y=ct(a))&&N?N.p(a,k):(N.d(1),N=Y(a),N&&(N.c(),N.m(_,null))),k&1&&U(P,a[0]),G===(G=ut(a))&&L?L.p(a,k):(L.d(1),L=G(a),L&&(L.c(),L.m(M.parentNode,M)))},d(a){a&&(u(t),u(l),u(n),u(y),u(s),u(r),u(c),u(S),u(M)),N.d(),L.d(a),nt=!1,yt(rt)}}}function It(o){let t,e,l;return{c(){t=m("input"),this.h()},l(n){t=v(n,"INPUT",{type:!0,id:!0,class:!0}),this.h()},h(){A(t,"type","text"),A(t,"id","IBAN"),A(t,"class","form-control"),t.readOnly=!0},m(n,p){g(n,t,p),U(t,o[1].iban),e||(l=X(t,"input",o[6]),e=!0)},p(n,p){p&2&&t.value!==n[1].iban&&U(t,n[1].iban)},d(n){n&&u(t),e=!1,l()}}}function Dt(o){let t,e,l;return{c(){t=m("input"),this.h()},l(n){t=v(n,"INPUT",{type:!0,id:!0,class:!0}),this.h()},h(){A(t,"type","text"),A(t,"id","iban"),A(t,"class","form-control")},m(n,p){g(n,t,p),U(t,o[1].iban),e||(l=X(t,"input",o[5]),e=!0)},p(n,p){p&2&&t.value!==n[1].iban&&U(t,n[1].iban)},d(n){n&&u(t),e=!1,l()}}}function Nt(o){let t,e="No transactions found.";return{c(){t=m("p"),t.textContent=e},l(l){t=v(l,"P",{"data-svelte-h":!0}),x(t)!=="svelte-r37g2m"&&(t.textContent=e)},m(l,n){g(l,t,n)},p:ot,d(l){l&&u(t)}}}function Lt(o){let t,e="Transaction History",l,n,p,E="<tr><th>Date</th> <th>Amount</th> <th>Description</th></tr>",B,y,s=_t(o[1].transactions),f=[];for(let i=0;i<s.length;i+=1)f[i]=mt(pt(o,s,i));return{c(){t=m("h2"),t.textContent=e,l=T(),n=m("table"),p=m("thead"),p.innerHTML=E,B=T(),y=m("tbody");for(let i=0;i<f.length;i+=1)f[i].c();this.h()},l(i){t=v(i,"H2",{"data-svelte-h":!0}),x(t)!=="svelte-xfqjnq"&&(t.textContent=e),l=I(i),n=v(i,"TABLE",{class:!0});var b=D(n);p=v(b,"THEAD",{"data-svelte-h":!0}),x(p)!=="svelte-xdrpu6"&&(p.innerHTML=E),B=I(b),y=v(b,"TBODY",{});var r=D(y);for(let c=0;c<f.length;c+=1)f[c].l(r);r.forEach(u),b.forEach(u),this.h()},h(){A(n,"class","table")},m(i,b){g(i,t,b),g(i,l,b),g(i,n,b),d(n,p),d(n,B),d(n,y);for(let r=0;r<f.length;r+=1)f[r]&&f[r].m(y,null)},p(i,b){if(b&2){s=_t(i[1].transactions);let r;for(r=0;r<s.length;r+=1){const c=pt(i,s,r);f[r]?f[r].p(c,b):(f[r]=mt(c),f[r].c(),f[r].m(y,null))}for(;r<f.length;r+=1)f[r].d(1);f.length=s.length}},d(i){i&&(u(t),u(l),u(n)),Bt(f,i)}}}function mt(o){let t,e,l=o[13].transactionDate+"",n,p,E,B=o[13].amount+"",y,s,f,i=o[13].description+"",b,r;return{c(){t=m("tr"),e=m("td"),n=q(l),p=T(),E=m("td"),y=q(B),s=T(),f=m("td"),b=q(i),r=T()},l(c){t=v(c,"TR",{});var C=D(t);e=v(C,"TD",{});var _=D(e);n=z(_,l),_.forEach(u),p=I(C),E=v(C,"TD",{});var h=D(E);y=z(h,B),h.forEach(u),s=I(C),f=v(C,"TD",{});var V=D(f);b=z(V,i),V.forEach(u),r=I(C),C.forEach(u)},m(c,C){g(c,t,C),d(t,e),d(e,n),d(t,p),d(t,E),d(E,y),d(t,s),d(t,f),d(f,b),d(t,r)},p(c,C){C&2&&l!==(l=c[13].transactionDate+"")&&R(n,l),C&2&&B!==(B=c[13].amount+"")&&R(y,B),C&2&&i!==(i=c[13].description+"")&&R(b,i)},d(c){c&&u(t)}}}function Pt(o){let t,e=o[2]&&bt(o);return{c(){e&&e.c(),t=W()},l(l){e&&e.l(l),t=W()},m(l,n){e&&e.m(l,n),g(l,t,n)},p(l,[n]){l[2]?e?e.p(l,n):(e=bt(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:ot,o:ot,d(l){l&&u(t),e&&e.d(l)}}}function wt(o,t,e){let l,n,p,E;Q(o,Et,_=>e(4,l=_)),Q(o,ht,_=>e(8,n=_)),Q(o,Tt,_=>e(9,p=_)),Q(o,gt,_=>e(2,E=_));const B=p.url.origin;let y=0,s={iban:null,balance:0,transactions:[]};function f(){var _={method:"get",url:B+"/api/service/me/myinfo",headers:{Authorization:"Bearer "+l}};at(_).then(function(h){Ct(ht,n=h.data.id,n)}).catch(function(h){alert("Could not get fitnessuser id"),console.log(h)})}function i(){var _={method:"put",url:B+"/api/balance/account/add?amount="+y,headers:{Authorization:"Bearer "+l}};at(_).then(function(h){e(1,s.balance=h.data.balance,s),alert("Balance "+y+" added successfully"),b()}).catch(function(h){alert("Could not add balance"),console.log(h)})}function b(){var _={method:"get",url:B+"/api/balance/account/myinfo",headers:{Authorization:"Bearer "+l}};at(_).then(function(h){h.data.iban!=null&&e(1,s.iban=h.data.iban,s),e(1,s.balance=h.data.balance,s),e(1,s.transactions=h.data.transactions||[],s)}).catch(function(h){alert("Could not get account"),console.log(h)})}function r(){s.iban=this.value,e(1,s)}function c(){s.iban=this.value,e(1,s)}function C(){y=this.value,e(0,y)}return o.$$.update=()=>{o.$$.dirty&16&&l!==""&&(b(),f())},[y,s,E,i,l,r,c,C]}class Ft extends kt{constructor(t){super(),At(this,t,wt,Pt,vt,{})}}export{Ft as component};
