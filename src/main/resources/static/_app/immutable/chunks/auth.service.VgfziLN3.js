import{o as m}from"./auth0-spa-js.production.esm.D13UjCU2.js";import{a as u,j as l,u as d}from"./store.BrgeTI6t.js";import{g as r}from"./entry.CLY7-BT4.js";const n={auth0_domain:"dev-gmrk0dyb2x6q64ad.us.auth0.com",auth0_client_id:"JKgVCghDdbXOOlMQNqcrdchmRXtl9HX6"};let h;async function p(){h=await m({domain:n.auth0_domain,clientId:n.auth0_client_id})}function _(o,s,t=null,a=null,e=null){var i={method:"post",url:`https://${n.auth0_domain}/dbconnections/signup`,data:{client_id:n.auth0_client_id,email:o,password:s,connection:"Username-Password-Authentication",user_metadata:{}}};e&&e.length>0&&(i.data.user_metadata.user_type=e),t&&t.length>0&&(i.data.given_name=t),a&&a.length>0&&(i.data.family_name=a),u(i).then(c=>{setTimeout(()=>{g(o,s,!0)},2e3)}).catch(function(c){alert("signup failed: "+c),console.log(c)})}function g(o,s,t=!1){var a={method:"post",url:`https://${n.auth0_domain}/oauth/token`,data:{grant_type:"password",username:o,password:s,audience:`https://${n.auth0_domain}/api/v2/`,scope:"openid profile email",client_id:n.auth0_client_id}};u(a).then(e=>{const{id_token:i,access_token:c}=e.data;l.set(i),console.log(i),f(c),t&&setTimeout(()=>{r("/account")},500)}).catch(function(e){alert("login failed"),console.log(e)})}function f(o){var s={method:"get",url:`https://${n.auth0_domain}/oauth/userinfo`,headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}};u(s).then(t=>{const a=t.data;d.set(a)}).catch(function(t){alert("getUserInfo failed"),console.log(t)})}async function w(){try{await p(),d.set({}),l.set(""),await h.logout({logoutParams:{returnTo:window.location.origin}})}catch(o){console.error(o)}r("/")}const C={signup:_,login:g,logout:w};export{C as a};
