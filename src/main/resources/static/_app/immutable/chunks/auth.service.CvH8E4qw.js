import{o as m}from"./auth0-spa-js.production.esm.D13UjCU2.js";import{a as u,j as l,u as d}from"./store.DClGJY-C.js";import{g as r}from"./entry.DI1Lf25T.js";const a={auth0_domain:"dev-gmrk0dyb2x6q64ad.us.auth0.com",auth0_client_id:"JKgVCghDdbXOOlMQNqcrdchmRXtl9HX6"};let h;async function _(){h=await m({domain:a.auth0_domain,clientId:a.auth0_client_id})}function p(o,s,t=null,e=null,i=null){var n={method:"post",url:`https://${a.auth0_domain}/dbconnections/signup`,data:{client_id:a.auth0_client_id,email:o,password:s,connection:"Username-Password-Authentication",user_metadata:{}}};i&&i.length>0&&(n.data.user_metadata.user_type=i),t&&t.length>0&&(n.data.given_name=t),e&&e.length>0&&(n.data.family_name=e),u(n).then(c=>{setTimeout(()=>{g(o,s,!0)},2e3)}).catch(function(c){alert("signup failed: "+c),console.log(c)})}function g(o,s,t=!1){var e={method:"post",url:`https://${a.auth0_domain}/oauth/token`,data:{grant_type:"password",username:o,password:s,audience:`https://${a.auth0_domain}/api/v2/`,scope:"openid profile email",client_id:a.auth0_client_id}};u(e).then(i=>{const{id_token:n,access_token:c}=i.data;l.set(n),sessionStorage.setItem("jwt_token",n),console.log(n),f(c),t&&setTimeout(()=>{r("/account")},500)}).catch(function(i){alert("login failed"),console.log(i)})}function f(o){var s={method:"get",url:`https://${a.auth0_domain}/oauth/userinfo`,headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}};u(s).then(t=>{const e=t.data;d.set(e)}).catch(function(t){alert("getUserInfo failed"),console.log(t)})}async function w(){try{await _(),d.set({}),l.set(""),sessionStorage.setItem("jwt_token",""),await h.logout({logoutParams:{returnTo:window.location.origin}})}catch(o){console.error(o)}r("/")}const I={signup:p,login:g,logout:w};export{I as a};
