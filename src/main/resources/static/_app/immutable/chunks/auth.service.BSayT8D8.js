import{o as p}from"./auth0-spa-js.production.esm.D13UjCU2.js";import{a as d,j as h,u as r}from"./store.BeOcsEKM.js";import{g}from"./entry.B1PXMASq.js";const o={auth0_domain:"dev-gmrk0dyb2x6q64ad.us.auth0.com",auth0_client_id:"JKgVCghDdbXOOlMQNqcrdchmRXtl9HX6"};let f;async function _(){f=await p({domain:o.auth0_domain,clientId:o.auth0_client_id})}function w(n,i,t=null,a=null,e=null,s=null,c=null){var l={method:"post",url:`https://${o.auth0_domain}/dbconnections/signup`,data:{client_id:o.auth0_client_id,email:n,password:i,connection:"Username-Password-Authentication",user_metadata:{}}};e&&e.length>0&&(l.data.user_metadata.user_type=e),t&&t.length>0&&(l.data.given_name=t),a&&a.length>0&&(l.data.family_name=a),s&&s.length>0&&(l.data.username=s),c&&c.length>0&&(l.data.picture=c),d(l).then(u=>{setTimeout(()=>{m(n,i,!0)},2e3)}).catch(function(u){alert("signup failed: "+u),console.log(u)})}function m(n,i,t=!1){var a={method:"post",url:`https://${o.auth0_domain}/oauth/token`,data:{grant_type:"password",username:n,password:i,audience:`https://${o.auth0_domain}/api/v2/`,scope:"openid profile email",client_id:o.auth0_client_id}};d(a).then(e=>{const{id_token:s,access_token:c}=e.data;h.set(s),console.log(s),v(c),t&&setTimeout(()=>{g("/account")},500)}).catch(function(e){alert("login failed"),console.log(e)})}function v(n){var i={method:"get",url:`https://${o.auth0_domain}/oauth/userinfo`,headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}};d(i).then(t=>{const a=t.data;r.set(a)}).catch(function(t){alert("getUserInfo failed"),console.log(t)})}async function y(){try{await _(),r.set({}),h.set(""),await f.logout({logoutParams:{returnTo:window.location.origin}})}catch(n){console.error(n)}g("/")}const $={signup:w,login:m,logout:y};export{$ as a};
