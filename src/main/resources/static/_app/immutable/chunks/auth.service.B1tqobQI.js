import{o as f}from"./auth0-spa-js.production.esm.D13UjCU2.js";import{a as u,j as d,u as r}from"./store.Dr_rZdYm.js";import{g as l}from"./entry.D-3tbB2m.js";const a={auth0_domain:"dev-gmrk0dyb2x6q64ad.us.auth0.com",auth0_client_id:"JKgVCghDdbXOOlMQNqcrdchmRXtl9HX6"};let h;async function m(){h=await f({domain:a.auth0_domain,clientId:a.auth0_client_id})}function p(o,s,t=null,e=null,n=null){var i={method:"post",url:`https://${a.auth0_domain}/dbconnections/signup`,data:{client_id:a.auth0_client_id,email:o,password:s,connection:"Username-Password-Authentication",user_metadata:{}}};n&&n.length>0&&(i.data.user_metadata.user_type=n),t&&t.length>0&&(i.data.given_name=t),e&&e.length>0&&(i.data.family_name=e),u(i).then(c=>{setTimeout(()=>{g(o,s,!0)},2e3),n==="fitnessuser"&&l("/accountedit")}).catch(function(c){alert("signup failed: "+c),console.log(c)})}function g(o,s,t=!1){var e={method:"post",url:`https://${a.auth0_domain}/oauth/token`,data:{grant_type:"password",username:o,password:s,audience:`https://${a.auth0_domain}/api/v2/`,scope:"openid profile email",client_id:a.auth0_client_id}};u(e).then(n=>{const{id_token:i,access_token:c}=n.data;d.set(i),console.log(i),_(c),t&&setTimeout(()=>{l("/")},500)}).catch(function(n){alert("login failed"),console.log(n)})}function _(o){var s={method:"get",url:`https://${a.auth0_domain}/oauth/userinfo`,headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}};u(s).then(t=>{const e=t.data;r.set(e)}).catch(function(t){alert("getUserInfo failed"),console.log(t)})}async function w(){try{await m(),r.set({}),d.set(""),await h.logout({logoutParams:{returnTo:window.location.origin}})}catch(o){console.error(o)}l("/")}const C={signup:p,login:g,logout:w};export{C as a};
